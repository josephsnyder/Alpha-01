\documentclass{InsightArticle}

\usepackage[dvips]{graphicx}
\usepackage{color}
\usepackage{listings}
\usepackage{verbatim}
\usepackage{textcomp}

\definecolor{listcomment}{rgb}{0.0,0.5,0.0}
\definecolor{listkeyword}{rgb}{0.0,0.0,0.5}
\definecolor{listnumbers}{gray}{0.65}
\definecolor{listlightgray}{gray}{0.955}
\definecolor{listwhite}{gray}{1.0}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%  hyperref should be the last package to be loaded.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[dvips,
bookmarks,
bookmarksopen,
backref,
colorlinks,linkcolor={blue},citecolor={blue},urlcolor={blue},
]{hyperref}


\newcommand{\lstlistingwithnumber}[3]{
\begin{center}
\lstinputlisting[linerange={#1-#2},firstnumber=#1,numbers=left]{#3}
\end{center}
}


\title{How to Write an OSEHR Technical Report}


%
% NOTE: This is the last number of the "handle" URL that
% The Insight Journal assigns to your paper as part of the
% submission process. Please replace the number "1338" with
% the actual handle number that you get assigned.
%
\newcommand{\IJhandlerIDnumber}{3261}

\lstset{frame = tb,
       framerule = 0.25pt,
       float,
       fontadjust,
       backgroundcolor={\color{listlightgray}},
       basicstyle = {\ttfamily\footnotesize},
       keywordstyle = {\ttfamily\color{listkeyword}\textbf},
       identifierstyle = {\ttfamily},
       commentstyle = {\ttfamily\color{listcomment}\textit},
       stringstyle = {\ttfamily},
       showstringspaces = false,
       showtabs = false,
       numbers = left,
       numbersep = 6pt,
       numberstyle={\ttfamily\color{listnumbers}},
       tabsize = 2,
       language=[ANSI]C++,
       floatplacement=!h
       }

\release{1.10}

\author{OSHER Custodial Agent}

\begin{document}


%
% Add hyperlink to the web location and license of the paper.
% The argument of this command is the handler identifier given
% by the Insight Journal to this paper.
%
\IJhandlefooter{\IJhandlerIDnumber}


\ifpdf
\else
   %
   % Commands for including Graphics when using latex
   %
   \DeclareGraphicsExtensions{.eps,.jpg,.gif,.tiff,.bmp,.png}
   \DeclareGraphicsRule{.jpg}{eps}{.jpg.bb}{`convert #1 eps:-}
   \DeclareGraphicsRule{.gif}{eps}{.gif.bb}{`convert #1 eps:-}
   \DeclareGraphicsRule{.tiff}{eps}{.tiff.bb}{`convert #1 eps:-}
   \DeclareGraphicsRule{.bmp}{eps}{.bmp.bb}{`convert #1 eps:-}
   \DeclareGraphicsRule{.png}{eps}{.png.bb}{`convert #1 eps:-}
\fi


\maketitle


\ifhtml
\chapter*{Front Matter\label{front}}
\fi


\begin{abstract}
\noindent
This paper describes the basic guidelines for preparing technical
reports to be contributed to the OSEHR Technical Journal. The purpose of this
Journal is to foster innovation in the OSEHR community and to drive this
innovations towards a mature state in which can be incorporated into the OSEHR
software platform.
\end{abstract}

\tableofcontents

\section{Introduction}

Technical reports for the OSEHR Technical Journal are written by software
developers and are intended for software developers. As such, they are required
to include the source code of any components that is the subject of the report,
and to include as well the unit tests and required data and parameters needed
to run such tests.

A successful OSEHR Technical Report should be such that any reader can download
the report and its acompanying materials and with minimal effort verify that the
software works and produce useful results.

\section{Code Walkthrough}

In this hypothetical example, we do a walk throught the source code of the
contribution with the purpose of highlighting some of the key features in this
source code piece.

First we say something smart about the first five lines:

\lstlistingwithnumber{1}{5}{program1.m}

That is followed by an explanation of why the next three lines are required:

\lstlistingwithnumber{6}{9}{program1.m}

and conclude with a commentary of the last lines:

\lstlistingwithnumber{10}{14}{program1.m}



\section{How to use the code}

In this typical section we explain how a typical OSEHR developer can take
advantage of the contribution described in this technical report.

Using the MUMPS interpreter, this routine can be executed by doing

\begin{verbatim}
mumps  program1.m
\end{verbatim}


\section{Conclusions}

In the final section we discuss potential improvements to the code, and what
other uses it could have.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%  Insert the bibliography using BibTeX
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\bibliographystyle{plain}
\bibliography{InsightJournal}


\end{document}
